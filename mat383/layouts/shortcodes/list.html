<!--<div class="posts">
	{{ $section := .Get "section" | default "blog" }}
	{{- range where .Site.RegularPages "Section" $section }}
		<a href="{{ .RelPermalink }}" class="postpreviewlink">
			<div class="postpreview  {{ if .Param "smallpost" -}}smallpost{{- end -}}">
				{{ if .Params.coverimg }}
					<div class="postpreviewcoverimg">
					<div class="postpreviewcoverimg2">
						<picture>
							<source srcset="/images/thumbnails/{{ .Params.coverimg }}.{{ .Params.coverimgmaintype }}" type="image/{{ .Params.coverimgmaintype }}">
							<img src="/images/thumbnails/{{ .Params.coverimg }}.jpg" width="400" height="200">
						</picture>
					</div>
					</div>
				{{ end }}
				<div class="postpreviewtext">
					<div class="postpreviewtimetags">
						<div class="postpreviewtime">
							{{- if .Param "datesinlist" -}}
								<time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date.Format "2006 Jan 02" }}</time>
							{{- end -}}
						</div>
						<div class="postpreviewtags">
							{{ partial "taglist2.html" . }}{{ if .Param "taglist" }}{{ end -}}
						</div>
					</div>
					
					<div class="postpreviewtitle">
						{{ .Title }}
					</div>
					{{ if .Params.summary }}
						<div class="postpreviewsummary">
							{{ .Params.summary }}
						</div>
					{{ end }}
				</div>
			</div>
		</a>
	{{- end }}
</div>-->

{{/* 
This shortcode lists all pages in a section ("/blog" by default) as if they were blog posts.
Small posts and big posts are put into separate div containers.

Example usage:
{{< list section="blog" >}}
*/}}


<!-- Cool code that puts small posts and big posts in separate divs,
	not needed anymore because that heirarchy is achieved with flexbox

<div class="postscontainer">
	{{/* Variable for keeping track of if we're in a smallpostcontainer or bigpostcontainer div */}}
    {{ $currentSection := "" }}
    
    {{ range where .Site.RegularPages "Section" $section }}
        {{ if .Param "smallpost" }}
			{{/* End a bigpostcontainer div */}}
            {{ if eq $currentSection "bigpost" }}
                </div>
            {{ end }}
            
			{{/* Start a smallpostcontainer div */}}
            {{ if ne $currentSection "smallpost" }}
                <div class="smallpostscontainer">
                    {{ $currentSection = "smallpost" }}
            {{ end }}
            
			{{/* Output the post */}}
            {{ partial "postpreview.html" . }}
            
        {{ else }}
			{{/* End a smallpostcontainer div */}}
            {{ if eq $currentSection "smallpost" }}
                </div>
            {{ end }}
            

			{{/* Start a bigpostcontainer div */}}
            {{ if ne $currentSection "bigpost" }}
                <div class="bigpostscontainer">
                    {{ $currentSection = "bigpost" }}
            {{ end }}
            
			{{/* Output the post */}}
            {{ partial "postpreview.html" . }}
        {{ end }}
    {{ end }}
</div>
-->


<div class="postscontainer">
	{{ range where .Site.RegularPages "Section" $section }}
		{{ partial "postpreview.html" . }}
    {{ end }}
</div>